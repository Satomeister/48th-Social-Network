(this["webpackJsonpsocial-app-portfolio"]=this["webpackJsonpsocial-app-portfolio"]||[]).push([[0],{115:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(44),c=a.n(o),s=(a(76),a(70)),i=a(3),l=a(13),u=a(15),m=a.n(u),d=a(65),p=a.n(d),f=(a(99),a(4)),E=a.n(f),b=a(11),h=a(2);m.a.defaults.baseURL="https://us-central1-social-app-portfolio.cloudfunctions.net/api";var _=function(e,t,a,n){return m.a.post("/signup",{handle:e,email:t,password:a,confirmPassword:n})},g=function(e,t){return m.a.post("/login",{email:e,password:t})},O=function(){return m.a.get("/signout")},v=function(e){return m.a.get("/user/".concat(e))},P=function(){return m.a.get("/posts")},j=function(e){return m.a.post("/post",{body:e})},N=function(){return m.a.get("/user")},C=function(e){return m.a.get("/post/".concat(e))},I=function(e,t){return m.a.post("/user",{bio:e,location:t})},S=function(e){return m.a.get("/post/".concat(e,"/like"))},T=function(e){return m.a.get("/post/".concat(e,"/unlike"))},y=function(e,t){return m.a.post("/post/".concat(e,"/comment"),{body:t})},k=function(e,t){return m.a.delete("/comment/".concat(e,"/").concat(t))},F=function(e){return m.a.delete("/post/".concat(e))},M=function(e){return m.a.post("/notifications",e)},A=a(66),R=a(32),x=a(67),w=a.n(x),D=(a(110),w.a.initializeApp({apiKey:"AIzaSyDPbMMe9DAGTo36ulfKPHfN18XwILSQtLQ",authDomain:"social-app-portfolio.firebaseapp.com",databaseURL:"https://social-app-portfolio.firebaseio.com",projectId:"social-app-portfolio",storageBucket:"social-app-portfolio.appspot.com",messagingSenderId:"291676968032",appId:"1:291676968032:web:20cde625b2e6fcb055df05"})),U="homeReducer/REMOVE_POST",L={posts:[],getUserDetailsFetching:!1,user:null},H=function(e){return{type:"homeReducer/SET_GET_USER_DETAILS_FETCHING",isFetching:e}},B=function(e){return{type:"usersReducer/LIKE_COUNT_PLUS",postId:e}},G=function(e){return{type:"usersReducer/LIKE_COUNT_MINUS",postId:e}},z=function(e){return{type:"usersReducer/ADD_NEW_POST_SUCCESS",post:e}},W=function(e){return{type:U,postId:e}},V=function(e){return{type:"usersReducer/COMMENT_COUNT_PLUS",postId:e}},K=function(e){return{type:"userReducer/COMMENT_COUNT_MINUS",postId:e}},Y={posts:[],isHomePageFetching:!1,isFormFetching:!1,createPostModalOpen:!1,addNewPostError:null},q=function(e){return{type:"homeReducer/SET_IS_HOME_PAGE_FETCHING",isFetching:e}},J=function(e){return{type:"homeReducer/ADD_NEW_POST_SUCCESS",post:e}},Z=function(e){return{type:"homeReducer/ADD_NEW_POST_ERROR",error:e}},X=function(e){return{type:"homeReducer/SET_FORM_FETCHING",isFormFetching:e}},Q=function(e){return{type:"homeReducer/REMOVE_POST",postId:e}},$=function(e){return{type:"homeReducer/SET_CREATE_POST_MODAL",isModal:e}},ee=function(e){return{type:"homeReducer/COMMENT_COUNT_PLUS",postId:e}},te=function(e){return{type:"homeReducer/COMMENT_COUNT_MINUS",postId:e}},ae=function(e){return{type:"homeReducer/LIKE_COUNT_PLUS",postId:e}},ne=function(e){return{type:"homeReducer/LIKE_COUNT_MINUS",postId:e}},re=function(e,t){return{type:"homeReducer/UPDATE_POSTS_USER_PHOTO",image:e,handle:t}},oe="profileReducer/SET_USER_DATA",ce="profileReducer/SET_IS_FETCHING",se={credentials:null,likes:[],notifications:[],isProfileFetching:!1,isFormFetching:!1,addUserDetailsError:null,editPhotoModal:!1,editProfileModal:!1},ie=function(e){return{type:ce,isFetching:e}},le=function(e,t){return{type:"profileReducer/UPDATE_LIKED_POSTS",postId:e,event:t}},ue=function(e){return{type:"profilePage/SET_EDIT_PHOTO_MODAL",isModal:e}},me=function(e){return{type:"profilePage/SET_EDIT_PROFILE_MODAL",isModal:e}},de=function(e){return{type:"profileReducer/SET_FORM_FETCHING",isFetching:e}},pe=function(e){return{type:"profilePage/ADD_USER_DETAILS_ERROR",error:e}},fe=function(e){return{type:"profileReducer/UPDATE_NOTIFICATIONS",arr:e}},Ee=function(e,t){return{type:"profileReducer/UPDATE_USER_DATA",bio:e,location:t}},be=function(){return function(){var e=Object(b.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(ie(!0)),e.next=4,N();case 4:200===(a=e.sent).status&&(t((n=a.data,{type:oe,payload:n})),t(ie(!1))),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),t(ie(!1)),e.t0.response&&e.t0.response.status;case 12:case"end":return e.stop()}var n}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},he="authReducer/SIGNUP_ERROR",_e="authReducer/LOGIN_ERROR",ge={loginError:null,signupError:null,isAuth:!1,isFormFetching:!1},Oe=function(e){return{type:"authReducer/AUTHORIZATION_SUCCESS",isAuth:e}},ve=function(e){return{type:_e,error:e}},Pe=function(e){return{type:he,error:e}},je=function(e){return{type:"authReducer/SET_IS_FETCHING",isFormFetching:e}},Ne=a(5),Ce=a(8),Ie=a(25),Se=a.n(Ie),Te=a(7),ye=a(10),ke=a(18),Fe=a.n(ke),Me=a(46),Ae=a.n(Me),Re=function(e){var t=e.closeModal,a=e.modalWrapCenter,o=void 0===a||a,c=e.isModalOpen,s=e.children,i=Object(n.useRef)();return r.a.createElement(r.a.Fragment,null,c&&r.a.createElement("div",{className:o?Ae.a.modalWrapCenter:Ae.a.modalWrap,onMouseDown:function(e){e.target===i.current&&t()},ref:i},r.a.createElement("div",{className:Ae.a.modal},s)))},xe=a(68),we=a.n(xe),De=function(e){var t=e.errorMessage;return t?r.a.createElement("div",{className:we.a.credErrorBlock},t):null},Ue=a(36),Le=a.n(Ue),He=function(e){var t=e.value,a=e.label,n=e.setValue,o="Password"===a||"Confirm Password"===a?"password":"text";return e.isError?r.a.createElement("div",{className:Le.a.inputBox},r.a.createElement("input",{value:t,onChange:function(e){n(e.target.value)},className:Le.a.errorInput,type:o,id:a,required:!0}),r.a.createElement("label",{className:Le.a.errorLabel,htmlFor:a},a)):r.a.createElement("div",{className:Le.a.inputBox},r.a.createElement("input",{value:t,onChange:function(e){n(e.target.value)},className:Le.a.input,type:o,id:a,required:!0}),r.a.createElement("label",{className:Le.a.label,htmlFor:a},a))},Be=function(e){var t=e.alignCenter,a=void 0!==t&&t,n=e.height,o=void 0===n?"80vh":n;return r.a.createElement("div",{style:a?{display:"flex",justifyContent:"center",height:"".concat(o),alignItems:"center"}:{display:"flex",justifyContent:"center"}},r.a.createElement("div",{style:{width:"40px",height:"40px"},className:"spinner-border text-info",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")))},Ge=Object(i.b)((function(e){return{isFormFetching:e.homePage.isFormFetching,createPostModalOpen:e.homePage.createPostModalOpen,addNewPostError:e.homePage.addNewPostError}}),{addNewPost:function(e){return function(){var t=Object(b.a)(E.a.mark((function t(a){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(X(!0)),t.prev=1,t.next=4,j(e);case 4:200===(n=t.sent).status&&(a(J(n.data)),a(z(n.data)),a(Z(null)),a($(!1)),a(X(!1))),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),a(X(!1)),t.t0.response&&(400===t.t0.response.status&&a(Z(t.t0.response.data.error)),500===t.t0.response.status&&a(Z("Something went wrong, please try again later")));case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.addNewPost,a=e.setCreatePostModalOpen,o=e.isFormFetching,c=e.createPostModalOpen,s=e.addNewPostError,i=Object(n.useState)(""),l=Object(Ne.a)(i,2),u=l[0],m=l[1];Object(n.useEffect)((function(){o||m("")}),[o]);var d=function(){a(!1),m("")};return r.a.createElement(Re,{closeModal:d,isModalOpen:c},r.a.createElement("h5",null,"Add a new Post"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t(u)}},r.a.createElement(De,{errorMessage:s}),r.a.createElement(He,{value:u,setValue:m,label:"Post",isError:s}),o&&r.a.createElement(Be,null),r.a.createElement("button",{disabled:o,type:"submit",className:Fe.a.btnSubmit,style:{marginLeft:"10px",marginTop:"30px"}},"Create"),r.a.createElement("button",{disabled:o,type:"button",onClick:d,className:Fe.a.btnSubmit,style:{marginLeft:"10px",marginTop:"30px"}},"Close")))})),ze=a(26),We=a.n(ze),Ve=a(50),Ke=a.n(Ve),Ye=Object(i.b)(null,{markNotificationsRead:function(e){return function(){var t=Object(b.a)(E.a.mark((function t(a){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M(e);case 3:200===t.sent.status&&a(fe(e)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),t.t0.response&&t.t0.response.status;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.setIsNotificationsOpen,a=e.notifications,o=e.markNotificationsRead,c=Object(n.useRef)(),s=a.filter((function(e){return!e.read}));Object(n.useEffect)((function(){return document.addEventListener("mousedown",i),function(){s.map((function(e){return e.notificationId})).length>0&&o(s.map((function(e){return e.notificationId}))),document.removeEventListener("mousedown",i)}}),[]);var i=function(e){c.current.contains(e.target)||t(!1)};return r.a.createElement("div",{className:Ke.a.notifications,onClick:i,ref:c},a.length>0?a.map((function(e,t){if(t<10){var a="like"===e.type?"liked":"commented on",n=We()(e.createdAt).fromNow(),o="like"===e.type?e.read?r.a.createElement(Te.a,{icon:ye.c,size:"lg",color:"rgb(0,160,202)"}):r.a.createElement(Te.a,{icon:ye.c,size:"lg",color:"rgb(255,75,0)"}):e.read?r.a.createElement(Te.a,{icon:ye.b,size:"lg",color:"rgb(0,160,202)"}):r.a.createElement(Te.a,{icon:ye.b,size:"lg",color:"rgb(255,75,0)"});return r.a.createElement(Ce.b,{to:"/users/".concat(e.recipient,"/post/").concat(e.postId),key:e.createdAt,className:Ke.a.not},o,r.a.createElement("span",null,e.sender," ",a," your post (",n,")"))}return null})):r.a.createElement("div",{style:{padding:"20px 0 20px 20px",fontSize:"20px"}},"You have no notifications yet"))})),qe=a(53),Je=a.n(qe),Ze=function(e){var t=e.text,a=e.children;return r.a.createElement("div",{className:Je.a.tooltip},r.a.createElement("span",{className:Je.a.text},t),a)},Xe=Object(i.b)((function(e){return{isAuth:e.auth.isAuth,credentials:e.profilePage.credentials,notifications:e.profilePage.notifications}}),{setCreatePostModalOpen:$})((function(e){var t=e.isAuth,a=e.credentials,o=e.notifications,c=e.setCreatePostModalOpen,s=Object(n.useState)(!1),i=Object(Ne.a)(s,2),u=i[0],m=i[1],d=o.filter((function(e){return!e.read})).length;return r.a.createElement("div",{className:Se.a.header},t?r.a.createElement("div",{className:Se.a.nav},r.a.createElement(l.b,{exact:!0,path:"/"},r.a.createElement(Ze,{text:"add post"},r.a.createElement("div",{onClick:function(){c(!0)},onMouseMove:function(){},className:Se.a.navIcon},r.a.createElement(Te.a,{icon:ye.h,size:"lg",color:"white"})))),a&&r.a.createElement(l.b,{exact:!0,path:"/users/".concat(a.handle)},r.a.createElement(Ze,{text:"add post"},r.a.createElement("div",{onClick:function(){c(!0)},className:Se.a.navIcon},r.a.createElement(Te.a,{icon:ye.h,size:"lg",color:"white"})))),r.a.createElement(Ce.b,{to:"/"},r.a.createElement(Ze,{text:"main page"},r.a.createElement("div",{className:Se.a.navIcon},r.a.createElement(Te.a,{icon:ye.d,size:"lg",color:"white"})))),r.a.createElement(Ce.b,{to:a?"/users/".concat(a.handle):"/"},r.a.createElement(Ze,{text:"your profile"},r.a.createElement("div",{className:Se.a.navIcon},r.a.createElement(Te.a,{icon:ye.k,size:"lg",color:"white"})))),r.a.createElement("div",{style:{position:"relative"}},r.a.createElement(Ze,{text:"notifications"},r.a.createElement("div",{onMouseDown:function(){m(!u)},className:Se.a.navIcon},r.a.createElement(Te.a,{icon:ye.a,size:"lg",color:"white"}))),d>0&&r.a.createElement("div",{className:Se.a.notCount},d),u&&r.a.createElement(Ye,{setIsNotificationsOpen:m,notifications:o}),r.a.createElement(Ge,{setCreatePostModalOpen:c}))):r.a.createElement("div",{className:Se.a.nav},r.a.createElement("div",{className:Se.a.navItem},r.a.createElement(Ce.b,{to:"/login"},"Login")),r.a.createElement("div",{className:Se.a.navItem},r.a.createElement(Ce.b,{to:"/"},"Home")),r.a.createElement("div",{className:Se.a.navItem},r.a.createElement(Ce.b,{to:"/signup"},"Signup"))))})),Qe=a(30),$e=a.n(Qe),et=a(41),tt=a.n(et),at="fullPostReducer/SET_POST_DATA",nt="fullPostReducer/ADD_NEW_COMMENT",rt="fullPostReducer/FORM_IS_FETCHING",ot="fullPostReducer/REMOVE_COMMENT",ct={post:null,postDataError:!1,getPostFetching:!1,commentError:null,isFormFetching:!1,isDeleteFetching:!1},st=function(e){return{type:"fullPostReducer/GET_POST_DATA_ERROR",bool:e}},it=function(e){return{type:"fullPostReducer/GET_POST_DATA_FETCHING",isFetching:e}},lt=function(e){return{type:"fullPostReducer/SET_COMMENT_ERROR",error:e}},ut=function(e){return{type:rt,isFetching:e}},mt=function(e){return{type:ot,commentId:e}},dt=function(e){return{type:"fullPostReducer/DELETE_COMMENT_ANIMATIONS",comment:e}},pt=function(e){return{type:"fullPostReducer/SET_IS_DELETE_FETCHING",isFetching:e}},ft=a(16),Et=a.n(ft),bt=a(35),ht=function(e){var t=e.isPostLiked,a=e.likePostHandler,n=e.unLikePostHandler,o=e.likeCount,c=e.openCommentModal,s=e.commentCount;return r.a.createElement("div",{className:Et.a.actions},t?r.a.createElement("div",{className:Et.a.likes},r.a.createElement(Te.a,{onClick:n,icon:ye.c,size:"lg",color:"rgb(0,160,202)"}),1===o&&r.a.createElement("small",{onClick:n,className:Et.a.iconText},"1 like"),o>1&&r.a.createElement("small",{onClick:n,className:Et.a.iconText},o+" likes")):r.a.createElement("div",{onClick:a,className:Et.a.likes},r.a.createElement(Te.a,{icon:bt.b,size:"lg",color:"rgb(0,160,202)"}),1===o&&r.a.createElement("small",{onClick:a,className:Et.a.iconText},"1 like"),o>1&&r.a.createElement("small",{onClick:a,className:Et.a.iconText},o+" likes")),c?r.a.createElement("div",{onClick:c,className:Et.a.comments},r.a.createElement(Te.a,{icon:bt.a,size:"lg",color:"rgb(0,160,202)"}),1===s&&r.a.createElement("small",{className:Et.a.iconText},"1 comment"),s>1&&r.a.createElement("small",{className:Et.a.iconText},s+" comments")):r.a.createElement("div",{className:Et.a.comments,style:{cursor:"auto"}},r.a.createElement(Te.a,{icon:ye.b,size:"lg",color:"rgb(0,160,202)"}),1===s&&r.a.createElement("small",{className:Et.a.iconText},"1 comment"),s>1&&r.a.createElement("small",{className:Et.a.iconText},s+" comments")))},_t=function(e){var t=e.post,a=e.isPostLiked,n=e.likePostHandler,o=e.unLikePostHandler,c=e.openCommentModal,s=void 0!==c&&c,i=e.likeCount,l=e.commentCount;return r.a.createElement("div",{className:Et.a.content},r.a.createElement("div",{className:Et.a.handle},r.a.createElement(Ce.b,{to:"/users/".concat(t.userHandle)},t.userHandle)),r.a.createElement("small",{className:Et.a.createdAt},We()(t.createdAt).calendar()),r.a.createElement("div",{className:Et.a.body},t.body),r.a.createElement(ht,{commentCount:l,likeCount:i,isPostLiked:a,likePostHandler:n,unLikePostHandler:o,openCommentModal:s}))},gt=Object(i.b)((function(e){return{isHomeFormFetching:e.homePage.isFormFetching,isDeleteFetching:e.postPage.isDeleteFetching}}))((function(e){var t=e.deleteItem,a=e.title,n=e.setDeletePostModal,o=e.isModalOpen,c=e.isHomeFormFetching,s=e.isDeleteFetching,i=function(){n(!1)};return r.a.createElement(Re,{closeModal:i,isModalOpen:o},r.a.createElement("h4",null,a),s&&r.a.createElement(Be,null),c&&r.a.createElement(Be,null),r.a.createElement("button",{disabled:c||s,onClick:t,type:"button",className:Fe.a.btnRed,style:{marginTop:"30px"}},"Delete"),r.a.createElement("button",{disabled:c||s,onClick:i,type:"button",className:Fe.a.btnSubmit,style:{marginLeft:"10px",marginTop:"30px"}},"Cancel"))})),Ot=Object(i.b)(null,{deletePost:function(e){return function(){var t=Object(b.a)(E.a.mark((function t(a){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(X(!0)),t.prev=1,t.next=4,F(e);case 4:200===t.sent.status&&(a(Q(e)),a(W(e)),a(X(!1))),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),a(X(!1)),t.t0.response&&(t.t0.response.status,t.t0.response.status,t.t0.response.status);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.isAuthUserPost,a=e.deletedPost,o=e.deletePost,c=Object(n.useState)(!1),s=Object(Ne.a)(c,2),i=s[0],l=s[1];return r.a.createElement("div",null,t&&r.a.createElement("div",{onClick:function(){l(!0)},className:tt.a.basket},r.a.createElement(Te.a,{icon:bt.c,size:"lg"})),i&&r.a.createElement(gt,{deleteItem:function(){o(a)},setDeletePostModal:l,title:"Are you sure you want to delete this Post?",isModalOpen:i}))})),vt=a(29),Pt=a.n(vt),jt=a(28),Nt=a.n(jt),Ct=Object(i.b)(null,{deleteComment:function(e,t){return function(){var a=Object(b.a)(E.a.mark((function a(n){return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(pt(!0)),a.prev=1,a.next=4,k(e,t);case 4:200===a.sent.status&&(n(mt(t)),n(te(e)),n(K(e)),n(pt(!1))),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(1),n(pt(!1)),a.t0.response&&(400===a.t0.response.status&&console.log(400),500===a.t0.response.status&&console.log(500));case 12:case"end":return a.stop()}}),a,null,[[1,8]])})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.isAuthUserPost,a=e.deletedComment,o=e.deleteComment,c=e.postId,s=Object(n.useState)(!1),i=Object(Ne.a)(s,2),l=i[0],u=i[1];return r.a.createElement("div",null,t&&r.a.createElement("div",{onClick:u,className:Nt.a.basket},r.a.createElement(Te.a,{icon:bt.c})),l&&r.a.createElement(gt,{deleteItem:function(){o(c,a)},setDeletePostModal:u,title:"Are you sure you want to delete this Comment?",isModalOpen:l}))})),It=Object(i.b)((function(e){return{authUserHandle:e.profilePage.credentials.handle,isFormFetching:e.postPage.isFormFetching}}))((function(e){var t=e.comment,a=e.isFormFetching,o=e.authUserHandle,c=e.postId,s=Object(n.useState)(!1),i=Object(Ne.a)(s,2),l=i[0],u=i[1];return Object(n.useEffect)((function(){o===t.userHandle?u(!0):u(!1)}),[o,t]),r.a.createElement("div",{className:!0===t.isAnimation?Nt.a.commentWithAnimations:Nt.a.comment},r.a.createElement(Ce.b,{to:"/users/".concat(t.userHandle),style:{background:"rgba(0,0,0,.4) url(".concat(t.userImage,") center / cover no-repeat")},className:Nt.a.photo}),r.a.createElement("div",{className:Nt.a.content},r.a.createElement("div",{className:Nt.a.handle},r.a.createElement(Ce.b,{to:"/users/".concat(t.userHandle)},t.userHandle)),r.a.createElement("small",{className:Nt.a.createdAt},We()(t.createdAt).calendar()),r.a.createElement("div",{className:Nt.a.body},t.body)),r.a.createElement(Ct,{isAuthUserPost:l,deletedComment:t.commentId,isFormFetching:a,postId:c}))})),St=Object(i.b)((function(e){return{commentError:e.postPage.commentError,isFormFetching:e.postPage.isFormFetching}}),{sendComment:function(e,t){return function(){var a=Object(b.a)(E.a.mark((function a(n){var r;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(ut(!0)),a.prev=1,a.next=4,y(e,t);case 4:200===(r=a.sent).status&&(n(ut(!1)),n(ee(e)),n(V(e)),n((o=r.data,{type:nt,payload:o})),setTimeout((function(){n(dt(r.data))}),3e3)),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(1),n(ut(!1)),a.t0.response&&(400===a.t0.response.status&&n(lt(a.t0.response.data.error)),500===a.t0.response.status&&n(lt("Something went wrong, please try again later")));case 12:case"end":return a.stop()}var o}),a,null,[[1,8]])})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.sendComment,a=e.commentError,o=e.postId,c=e.isFormFetching,s=Object(n.useState)(""),i=Object(Ne.a)(s,2),l=i[0],u=i[1];Object(n.useEffect)((function(){c||a||u("")}),[c]);return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t(o,l)}},r.a.createElement(De,{errorMessage:a}),r.a.createElement(He,{value:l,setValue:u,label:"Your comment",isError:a}),c&&r.a.createElement(Be,null),r.a.createElement("button",{disabled:c,type:"submit",className:Fe.a.btnSubmit},"Send"))})),Tt=Object(i.b)((function(e){return{post:e.postPage.post,postDataError:e.postPage.postDataError,getPostFetching:e.postPage.getPostFetching}}))((function(e){var t=e.post,a=e.isPostLiked,o=e.isCommentModal,c=e.credentials,s=e.likePostHandler,i=e.unLikePostHandler,l=e.closeModal,u=e.likeCount,m=e.commentCount,d=e.getPostFetching;return Object(n.useEffect)((function(){document.body.style.overflow=o?"hidden":""}),[o]),r.a.createElement(Re,{closeModal:l,modalWrapCenter:!1,style:{width:"550px"},isModalOpen:o&&c},d?r.a.createElement(Be,null):t&&r.a.createElement("div",null,r.a.createElement("div",{className:Pt.a.post},r.a.createElement(Ce.b,{to:"/users/".concat(t.userHandle)},r.a.createElement("div",{style:{background:"url(".concat(t.userImage,") center / cover no-repeat")},className:Pt.a.photo})),r.a.createElement("div",{className:Pt.a.postContent},r.a.createElement(Ce.b,{to:"/users/".concat(t.userHandle),className:Pt.a.handle},t.userHandle),r.a.createElement("small",{className:Pt.a.createdAt},We()(t.createdAt).calendar()),r.a.createElement("div",{className:Pt.a.body},t.body),r.a.createElement("div",{style:{marginLeft:"-100px"}},r.a.createElement(ht,{isPostLiked:a,likePostHandler:s,unLikePostHandler:i,likeCount:u,commentCount:m}))),r.a.createElement("div",{onClick:function(){l()},className:Pt.a.closeButton},r.a.createElement(Te.a,{className:Pt.a.closeIcon,icon:ye.j,color:"rgba(0,160,202,.8)"}))),r.a.createElement(St,{postId:t.postId}),r.a.createElement("div",{className:Pt.a.comments},t.comments.map((function(e){return r.a.createElement(It,{key:e.createdAt,comment:e,postId:t.postId})})))))})),yt=Object(l.g)(Object(i.b)((function(e){return{isAuth:e.auth.isAuth,likedPosts:e.profilePage.likes,credentials:e.profilePage.credentials}}),{likePost:function(e){return function(){var t=Object(b.a)(E.a.mark((function t(a){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,S(e);case 3:200===t.sent.status&&(a(le(e,!0)),a(B(e)),a(ae(e))),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),t.t0.response&&(t.t0.response.status,t.t0.response.status);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},unLikePost:function(e){return function(){var t=Object(b.a)(E.a.mark((function t(a){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,T(e);case 3:200===t.sent.status&&(a(le(e,!1)),a(ne(e)),a(G(e))),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),t.t0.response&&(t.t0.response.status,t.t0.response.status);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},getPostDataById:function(e){return function(){var t=Object(b.a)(E.a.mark((function t(a){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(it(!0)),t.prev=1,t.next=4,C(e);case 4:200===(n=t.sent).status&&(a(st(!1)),a((r=n.data,{type:at,post:r})),a(it(!1))),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),a(it(!1)),t.t0.response&&(t.t0.response.status,500===t.t0.response.status&&a(st(!0)));case 12:case"end":return t.stop()}var r}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.isAuth,a=e.post,o=e.likePost,c=e.likedPosts,s=e.unLikePost,i=e.getPostDataById,l=e.credentials,u=e.commentModalOpen,m=void 0!==u&&u,d=e.history,p=Object(n.useState)(!1),f=Object(Ne.a)(p,2),E=f[0],b=f[1],h=Object(n.useState)(!1),_=Object(Ne.a)(h,2),g=_[0],O=_[1],v=Object(n.useState)(null),P=Object(Ne.a)(v,2),j=P[0],N=P[1],C=Object(n.useState)(!1),I=Object(Ne.a)(C,2),S=I[0],T=I[1];Object(n.useEffect)((function(){l&&l.handle===a.userHandle?b(!0):b(!1),c&&c.some((function(e){return e.postId===a.postId}))?T(!0):T(!1)})),Object(n.useEffect)((function(){m&&F()}),[]);var y=function(){t||d.push("/login"),o(a.postId)},k=function(){t||d.push("/login"),s(a.postId)},F=function(){var e=window.location.pathname,t="/users/".concat(a.userHandle,"/post/").concat(a.postId);e===t&&(e="/users/".concat(a.userHandle)),window.history.pushState(null,null,t),N(e),i(a.postId),O(!0)},M=function(){var e=j||"/users/".concat(a.userHandle);d.push(e),O(!1)};return r.a.createElement("div",{className:tt.a.post},r.a.createElement(Ce.b,{to:"/users/".concat(a.userHandle)},r.a.createElement("div",{className:tt.a.userPhoto,style:{background:"rgba(0,0,0,.5) url(".concat(a.userImage,") center / cover no-repeat")}})),r.a.createElement(_t,{post:a,isPostLiked:S,likePostHandler:y,unLikePostHandler:k,openCommentModal:F,likeCount:a.likeCount,commentCount:a.commentCount}),r.a.createElement(Tt,{isPostLiked:S,credentials:l,likePostHandler:y,unLikePostHandler:k,closeCommentModal:M,likeCount:a.likeCount,commentCount:a.commentCount,closeModal:M,isCommentModal:g}),r.a.createElement(Ot,{isAuthUserPost:E,deletedPost:a.postId}))}))),kt=a(12),Ft=a.n(kt),Mt=Object(i.b)((function(e){return{isFormFetching:e.profilePage.isFormFetching,editProfileModal:e.profilePage.editProfileModal,addUserDetailsError:e.profilePage.addUserDetailsError}}),{addUserDetails:function(e,t){return function(){var a=Object(b.a)(E.a.mark((function a(n){return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(de(!0)),a.prev=1,a.next=4,I(e,t);case 4:200===a.sent.status&&(n(de(!1)),n(Ee(e,t)),n(pe(null)),n(me(!1))),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(1),n(de(!1)),a.t0.response&&(400===a.t0.response.status&&n(pe(a.t0.response.data.error)),500===a.t0.response.status&&n(pe("Something went wrong, please try again later")));case 12:case"end":return a.stop()}}),a,null,[[1,8]])})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.setShowModal,a=e.addUserDetails,o=e.isFormFetching,c=e.editProfileModal,s=e.addUserDetailsError,i=Object(n.useState)(""),l=Object(Ne.a)(i,2),u=l[0],m=l[1],d=Object(n.useState)(!1),p=Object(Ne.a)(d,2),f=p[0],E=p[1],b=Object(n.useState)(!1),h=Object(Ne.a)(b,2),_=h[0],g=h[1],O=Object(n.useState)(""),v=Object(Ne.a)(O,2),P=v[0],j=v[1];Object(n.useEffect)((function(){s&&-1!==s.indexOf("biography")?(E(!0),g(!1)):s&&-1!==s.indexOf("location")?(g(!0),E(!1)):(E(!1),g(!1))}),[s]);var N=function(){m(""),j(""),t(!1)};return r.a.createElement(Re,{closeModal:N,isModalOpen:c},r.a.createElement("h5",{style:{marginBottom:"20px"}},"Here you can edit your bio and location"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a(u,P)}},r.a.createElement(De,{errorMessage:s}),r.a.createElement(He,{value:u,setValue:m,label:"About You",isError:f}),r.a.createElement(He,{value:P,setValue:j,label:"Your locations",isError:_}),r.a.createElement("button",{disabled:o,type:"submit",className:Fe.a.btnSubmit},"Edit"),r.a.createElement("button",{disabled:o,type:"button",onClick:N,className:Fe.a.btnSubmit,style:{marginLeft:"10px"}},"Close")))})),At=Object(i.b)((function(e){return{isFetching:e.profilePage.isFormFetching,editPhotoModal:e.profilePage.editPhotoModal}}),{editPhoto:function(e,t){return function(){var a=Object(b.a)(E.a.mark((function a(n){var r;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r=D.firestore();try{r.doc("/users/".concat(t)).update({imageUrl:e}).then((function(){return r.collection("posts").where("userHandle","==",t).get().then((function(t){t.forEach((function(t){t.ref.update({userImage:e})}))})).then((function(){return r.collection("comments").where("userHandle","==",t).get().then((function(t){t.forEach((function(t){t.ref.update({userImage:e})}))}))})).then((function(){n(de(!1)),n(ue(!1)),n({type:"profileReducer/UPDATE_USER_PHOTO",image:e}),n(re(e,t))}))}))}catch(o){n(de(!0)),console.log(o)}case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},setFormFetching:de})((function(e){var t=e.setEditPhotoModal,a=e.handle,o=e.editPhoto,c=e.isFetching,s=e.setFormFetching,i=e.editPhotoModal,l=Object(n.useState)(null),u=Object(Ne.a)(l,2),m=u[0],d=u[1],p=Object(n.useState)(!1),f=Object(Ne.a)(p,2),h=f[0],_=f[1],g=function(){var e=Object(b.a)(E.a.mark((function e(t){var n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),"png"!==m.type.split("/")[1]&&"jpeg"!==m.type.split("/")[1]){e.next=17;break}return s(!0),n=D.storage().ref(),r=n.child(m.name),e.next=7,r.put(m);case 7:return e.next=9,r.getDownloadURL();case 9:return e.t0=o,e.next=12,r.getDownloadURL();case 12:e.t1=e.sent,e.t2=a,(0,e.t0)(e.t1,e.t2),e.next=18;break;case 17:_(!0);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(Re,{closeModal:t,isModalOpen:i},r.a.createElement("h5",null,"Here you can add or change your photo"),r.a.createElement("form",{onSubmit:g},r.a.createElement("div",null,r.a.createElement(De,{errorMessage:h&&"Invalid type of the file, must be png or jpeg"}),r.a.createElement("input",{type:"file",onChange:function(e){_(!1);var t=e.target.files[0];d(t)},style:{marginTop:"10px"}})),c&&r.a.createElement(Be,null),r.a.createElement("button",{disabled:c,type:"submit",className:Fe.a.btnSubmit,style:{marginLeft:"10px",marginTop:"30px"}},"Edit"),r.a.createElement("button",{disabled:c,type:"button",onClick:function(){t(!1)},className:Fe.a.btnSubmit,style:{marginLeft:"10px",marginTop:"30px"}},"Close")))})),Rt=Object(i.b)((function(e){return{isAuth:e.auth.isAuth,credentials:e.profilePage.credentials,isProfileFetching:e.profilePage.isProfileFetching}}),{signout:function(){return function(){var e=Object(b.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(je(!0)),e.prev=1,e.next=4,O();case 4:200===e.sent.status&&(localStorage.removeItem("FBIdToken"),delete m.a.defaults.headers.common.Authorization,t({type:"profilePage/SET_USER_DATA_NULL"}),t(Oe(!1))),t(je(!1)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),t(je(!1)),e.t0.response&&500===e.t0.response.status&&console.log("Something Wrond");case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},setEditPhotoModal:ue,setEditProfileModal:me})((function(e){var t=e.isAuth,a=e.credentials,n=e.signout,o=e.setEditPhotoModal,c=e.setEditProfileModal;return r.a.createElement("div",{className:Ft.a.userProfileWrap},r.a.createElement("div",{className:Ft.a.userProfile},t?r.a.createElement("div",null,a?r.a.createElement("div",{className:Ft.a.content},r.a.createElement("div",{style:{background:"url(".concat(a.imageUrl,") center / cover no-repeat")},className:Ft.a.photo},r.a.createElement("div",{onClick:function(){o(!0)},className:Ft.a.editPhoto},r.a.createElement(Te.a,{icon:ye.g,size:"lg",color:"rgba(0,160,202,.8)"}))),r.a.createElement("div",{className:Ft.a.handle},a.handle),a.bio&&r.a.createElement("div",{className:Ft.a.bio},a.bio),a.location&&r.a.createElement("div",{className:Ft.a.location},r.a.createElement(Te.a,{icon:ye.f,size:"lg",color:"rgba(0,160,202,.8)"}),r.a.createElement("span",null,a.location)),r.a.createElement("div",{className:Ft.a.createdAt},"Joined ",We()(a.createdAt).calendar()),r.a.createElement("div",{onClick:function(){n()},className:Ft.a.signout},r.a.createElement(Te.a,{icon:ye.i,size:"lg",color:"rgba(0,160,202,.8)"}),r.a.createElement("span",null,"signout")),r.a.createElement("div",{onClick:function(){c(!0)},className:Ft.a.edit},r.a.createElement(Te.a,{icon:ye.g,size:"lg",color:"rgba(0,160,202,.8)"}),r.a.createElement("span",null,"edit")),r.a.createElement(Mt,{setShowModal:c}),r.a.createElement(At,{handle:a.handle,setEditPhotoModal:o})):r.a.createElement(Be,{alignCenter:!0,height:"260px"})):r.a.createElement("div",null,r.a.createElement("div",null,"You are not authorized, please login or sign up."),r.a.createElement(Ce.b,{to:"/login"},r.a.createElement("button",{className:Fe.a.btnSubmit,style:{padding:"5px 15px",marginTop:"5px"}},"Login")),r.a.createElement(Ce.b,{to:"/signup"},r.a.createElement("button",{className:Fe.a.btnSubmit,style:{padding:"5px 15px",marginTop:"5px",marginLeft:"10px"}},"Sign up")))))})),xt=Object(i.b)((function(e){return{isAuth:e.auth.isAuth,posts:e.homePage.posts,isHomePageFetching:e.homePage.isHomePageFetching,isProfileFetching:e.profilePage.isProfileFetching}}),{getAuthUserDetails:be,getPosts:function(){return function(){var e=Object(b.a)(E.a.mark((function e(t){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(q(!0)),e.prev=1,e.next=4,P();case 4:200===(a=e.sent).status&&(t({type:"homeReducer/SET_ALL_POSTS",posts:a.data}),t(q(!1))),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),e.t0.response.status;case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.isAuth,a=e.getAuthUserDetails,o=e.getPosts,c=e.posts,s=e.isHomePageFetching,i=e.isProfileFetching,l=document.documentElement.clientWidth<=700;return Object(n.useEffect)((function(){t&&a()}),[t]),Object(n.useEffect)((function(){o()}),[]),t?r.a.createElement("div",{className:$e.a.homeContainer},s||i?r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(Be,{alignCenter:!0,height:"80vh"})):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:$e.a.postsContainer},r.a.createElement("span",{className:$e.a.postsTitle},"POSTS"),c.map((function(e){return r.a.createElement(yt,{key:e.postId,post:e})}))),!l&&r.a.createElement(Rt,null))):r.a.createElement("div",{className:$e.a.homeContainer},s?r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(Be,{alignCenter:!0,height:"80vh"})):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:$e.a.postsContainer},c.map((function(e){return r.a.createElement(yt,{key:e.postId,post:e})}))),!l&&r.a.createElement(Rt,null)))})),wt=Object(l.g)(Object(i.b)((function(e){return{isAuth:e.auth.isAuth,posts:e.userPage.posts,user:e.userPage.user,getUserDetailsFetching:e.userPage.getUserDetailsFetching,credentials:e.profilePage.credentials}}),{getUserDetails:function(e){return function(){var t=Object(b.a)(E.a.mark((function t(a){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(H(!0)),t.prev=1,t.next=4,v(e);case 4:200===(n=t.sent).status&&(a({type:"usersReducer/SET_USER_DETAILS",payload:n.data}),a(H(!1))),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),a(H(!1)),t.t0.response&&(t.t0.response.status,t.t0.response.status);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},getAuthUserDetails:be})((function(e){var t=e.isAuth,a=e.credentials,o=e.posts,c=e.user,s=e.getUserDetailsFetching,i=e.getUserDetails,l=e.match,u=e.getAuthUserDetails,m=l.params.handle,d=l.params.postId,p=Object(n.useState)(!1),f=Object(Ne.a)(p,2),E=f[0],b=f[1];c&&m!==c.handle&&window.history.go(0);var h=o.sort((function(e,t){return(e=new Date(e.createdAt))>(t=new Date(t.createdAt))?-1:e<t?1:0}));Object(n.useEffect)((function(){a&&c&&c.handle===a.handle?b(!0):b(!1)}),[c,a]),Object(n.useEffect)((function(){i(m)}),[]),Object(n.useEffect)((function(){t&&u()}),[t]);var _=d?h.map((function(e){return e.postId!==d?r.a.createElement(yt,{key:e.postId,post:e}):r.a.createElement(yt,{key:e.postId,post:e,commentModalOpen:!0})})):h.map((function(e){return r.a.createElement(yt,{key:e.postId,post:e})}));return r.a.createElement("div",null,!s&&c?r.a.createElement("div",{className:$e.a.homeContainer},r.a.createElement("div",{className:$e.a.postsContainer},r.a.createElement("span",{className:Ft.a.postsTitle},"posts of ",c.handle),o.length>0?r.a.createElement("div",null,_):r.a.createElement("div",null,"This user has no posts")),E?r.a.createElement(Rt,null):r.a.createElement("div",{className:Ft.a.userProfileWrap},r.a.createElement("div",{className:Ft.a.userProfile},r.a.createElement("div",{className:Ft.a.content},r.a.createElement("div",{style:{background:"url(".concat(c.imageUrl,") center / cover no-repeat")},className:Ft.a.photo}),r.a.createElement("div",{className:Ft.a.handle},c.handle),c.bio&&r.a.createElement("div",{className:Ft.a.bio},c.bio),c.location&&r.a.createElement("div",{className:Ft.a.location},r.a.createElement(Te.a,{icon:ye.f,size:"lg",color:"rgba(0,160,202,.8)"}),r.a.createElement("span",null,c.location)),r.a.createElement("div",{className:Ft.a.createdAt},"Joined ",We()(c.createdAt).calendar()))))):r.a.createElement(Be,{alignCenter:!0,height:"80vh"}))}))),Dt=function(e,t){return Object(i.b)((function(e){return{isAuth:e.auth.isAuth}}))((function(a){return a.isAuth?r.a.createElement(l.a,{to:t}):r.a.createElement(e,a.isAuth)}))},Ut=a(21),Lt=a.n(Ut),Ht=function(e){var t=e.height,a=e.children;return r.a.createElement("div",{className:Lt.a.authPage,style:{height:t}},r.a.createElement("div",{className:Lt.a.authContent},r.a.createElement("div",{className:Lt.a.lockIcon},r.a.createElement(Te.a,{icon:ye.e,size:"2x",color:"#fff"})),a))},Bt=Dt(Object(i.b)((function(e){return{isFormFetching:e.auth.isFormFetching,loginError:e.auth.loginError}}),{login:function(e,t){return function(){var a=Object(b.a)(E.a.mark((function a(n){var r;return E.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(je(!0)),n(ve(null)),a.prev=2,a.next=5,g(e,t);case 5:200===(r=a.sent).status&&(localStorage.setItem("FBIdToken","Bearer ".concat(r.data.token)),n(Oe(!0))),n(je(!1)),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(2),n(je(!1)),a.t0.response&&(400===a.t0.response.status&&n(ve(a.t0.response.data.error)),500===a.t0.response.status&&n(ve("Something went wrong, please try again later")));case 14:case"end":return a.stop()}}),a,null,[[2,10]])})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.login,a=e.loginError,o=e.isFormFetching,c=Object(n.useState)(""),s=Object(Ne.a)(c,2),i=s[0],l=s[1],u=Object(n.useState)(""),m=Object(Ne.a)(u,2),d=m[0],p=m[1];Object(n.useEffect)((function(){l(""),p("")}),[a]);return r.a.createElement(Ht,{height:530},r.a.createElement("h2",{className:Lt.a.title},"Login as Existing user"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t(i,d)},className:Lt.a.form},r.a.createElement(De,{errorMessage:a}),r.a.createElement(He,{value:i,setValue:l,label:"Email"}),r.a.createElement(He,{value:d,setValue:p,label:"Password"}),r.a.createElement("button",{disabled:o,className:Lt.a.button,type:"submit"},"LOGIN")),r.a.createElement("div",{className:Lt.a.link},r.a.createElement("small",null,"Do not have an account? sign up ",r.a.createElement(Ce.b,{to:"/signup"},"here"))))})),"/"),Gt=Dt(Object(i.b)((function(e){return{isFormFetching:e.auth.isFormFetching,signupError:e.auth.signupError}}),{signup:function(e,t,a,n){return function(){var r=Object(b.a)(E.a.mark((function r(o){var c;return E.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o(je(!0)),o(Pe(null)),r.prev=2,r.next=5,_(e,t,a,n);case 5:200===(c=r.sent).status&&(localStorage.setItem("FBIdToken","Bearer ".concat(c.data.token)),o(Oe(!0))),o(je(!1)),r.next=14;break;case 10:r.prev=10,r.t0=r.catch(2),o(je(!1)),r.t0.response&&(400===r.t0.response.status&&o(Pe(r.t0.response.data.error)),500===r.t0.response.status&&o(Pe("Something went wrong, please try again later")));case 14:case"end":return r.stop()}}),r,null,[[2,10]])})));return function(e){return r.apply(this,arguments)}}()}})((function(e){var t=e.signup,a=e.signupError,o=e.isFormFetching,c=Object(n.useState)(""),s=Object(Ne.a)(c,2),i=s[0],l=s[1],u=Object(n.useState)(""),m=Object(Ne.a)(u,2),d=m[0],p=m[1],f=Object(n.useState)(""),E=Object(Ne.a)(f,2),b=E[0],h=E[1],_=Object(n.useState)(""),g=Object(Ne.a)(_,2),O=g[0],v=g[1];return r.a.createElement(Ht,{height:650},r.a.createElement("h2",{className:Lt.a.title},"Create an account"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t(i,d,b,O)},className:Lt.a.form},r.a.createElement(De,{errorMessage:a}),r.a.createElement(He,{value:i,setValue:l,label:"Handle"}),r.a.createElement(He,{value:d,setValue:p,label:"Email"}),r.a.createElement(He,{value:b,setValue:h,label:"Password"}),r.a.createElement(He,{value:O,setValue:v,label:"Confirm Password"}),r.a.createElement("button",{disabled:o,className:Lt.a.button,type:"submit"},"LOGIN")),r.a.createElement("div",{className:Lt.a.link},r.a.createElement("small",null,"Already have an account? login ",r.a.createElement(Ce.b,{to:"/login"},"here"))))})),"/"),zt=Object(l.g)(Object(i.b)((function(e){return{isAuth:e.auth.isAuth}}),{authorizationsSuccess:Oe})((function(e){var t=e.authorizationsSuccess,a=e.isAuth,o=Object(s.a)(e,["authorizationsSuccess","isAuth"]);return Object(n.useEffect)((function(){var e=localStorage.FBIdToken;e&&(1e3*p()(e).exp<Date.now()?(localStorage.removeItem("FBIdToken"),!0===a&&t(!1),o.history.push("/login")):(m.a.defaults.headers.common.Authorization=e,t(!0)))}),[a]),r.a.createElement("div",{className:"App"},r.a.createElement(Xe,null),r.a.createElement(l.d,null,r.a.createElement(l.b,{exact:!0,path:"/"},r.a.createElement(xt,null)),r.a.createElement(l.b,{exact:!0,path:"/login"},r.a.createElement(Bt,null)),r.a.createElement(l.b,{exact:!0,path:"/signup"},r.a.createElement(Gt,null)),r.a.createElement(l.b,{exact:!0,path:"/users/:handle"},r.a.createElement(wt,null)),r.a.createElement(l.b,{exact:!0,path:"/users/:handle/post/:postId"},r.a.createElement(wt,null))))})));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Wt=a(38),Vt=a(69),Kt=Object(Wt.c)({profilePage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe:return Object(h.a)(Object(h.a)({},e),t.payload);case"profilePage/SET_USER_DATA_NULL":return Object(h.a)(Object(h.a)({},e),{},{credentials:null,likes:null});case"profilePage/ADD_USER_DETAILS_ERROR":return Object(h.a)(Object(h.a)({},e),{},{addUserDetailsError:t.error});case ce:return Object(h.a)(Object(h.a)({},e),{},{isProfileFetching:t.isFetching});case"profileReducer/SET_FORM_FETCHING":return Object(h.a)(Object(h.a)({},e),{},{isFormFetching:t.isFetching});case"profileReducer/UPDATE_USER_DATA":return Object(h.a)(Object(h.a)({},e),{},{credentials:Object(h.a)(Object(h.a)({},e.credentials),{},{bio:t.bio,location:t.location})});case"profileReducer/UPDATE_USER_PHOTO":return Object(h.a)(Object(h.a)({},e),{},{credentials:Object(h.a)(Object(h.a)({},e.credentials),{},{imageUrl:t.image})});case"profileReducer/UPDATE_LIKED_POSTS":return Object(h.a)(Object(h.a)({},e),{},{likes:t.event?[].concat(Object(R.a)(e.likes),[{postId:t.postId,userHandle:e.credentials.handle}]):e.likes.filter((function(e){return e.postId!==t.postId}))});case"profileReducer/UPDATE_NOTIFICATIONS":return Object(h.a)(Object(h.a)({},e),{},{notifications:e.notifications.map((function(e){var a,n=Object(A.a)(t.arr);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(e.notificationId===r)return Object(h.a)(Object(h.a)({},e),{},{read:!0})}}catch(o){n.e(o)}finally{n.f()}return e}))});case"profilePage/SET_EDIT_PHOTO_MODAL":return Object(h.a)(Object(h.a)({},e),{},{editPhotoModal:t.isModal});case"profilePage/SET_EDIT_PROFILE_MODAL":return Object(h.a)(Object(h.a)({},e),{},{editProfileModal:t.isModal});default:return e}},homePage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"homeReducer/SET_ALL_POSTS":return Object(h.a)(Object(h.a)({},e),{},{posts:t.posts});case"homeReducer/SET_IS_HOME_PAGE_FETCHING":return Object(h.a)(Object(h.a)({},e),{},{isHomePageFetching:t.isFetching});case"homeReducer/ADD_NEW_POST_SUCCESS":return Object(h.a)(Object(h.a)({},e),{},{posts:[t.post].concat(Object(R.a)(e.posts))});case"homeReducer/ADD_NEW_POST_ERROR":return Object(h.a)(Object(h.a)({},e),{},{addNewPostError:t.error});case"homeReducer/SET_FORM_FETCHING":return Object(h.a)(Object(h.a)({},e),{},{isFormFetching:t.isFormFetching});case"homeReducer/REMOVE_POST":return Object(h.a)(Object(h.a)({},e),{},{posts:e.posts.filter((function(e){return e.postId!==t.postId}))});case"homeReducer/UPDATE_POSTS_USER_PHOTO":return Object(h.a)(Object(h.a)({},e),{},{posts:e.posts.map((function(e){return e.userHandle===t.handle?Object(h.a)(Object(h.a)({},e),{},{userImage:t.image}):e}))});case"homeReducer/SET_CREATE_POST_MODAL":return Object(h.a)(Object(h.a)({},e),{},{createPostModalOpen:t.isModal});case"homeReducer/LIKE_COUNT_PLUS":return Object(h.a)(Object(h.a)({},e),{},{posts:e.posts.map((function(e){return e.postId===t.postId?Object(h.a)(Object(h.a)({},e),{},{likeCount:e.likeCount+1}):e}))});case"homeReducer/LIKE_COUNT_MINUS":return Object(h.a)(Object(h.a)({},e),{},{posts:e.posts.map((function(e){return e.postId===t.postId?Object(h.a)(Object(h.a)({},e),{},{likeCount:e.likeCount-1}):e}))});case"homeReducer/COMMENT_COUNT_PLUS":return Object(h.a)(Object(h.a)({},e),{},{posts:e.posts.map((function(e){return e.postId===t.postId?Object(h.a)(Object(h.a)({},e),{},{commentCount:e.commentCount+1}):e}))});case"homeReducer/COMMENT_COUNT_MINUS":return Object(h.a)(Object(h.a)({},e),{},{posts:e.posts.map((function(e){return e.postId===t.postId?Object(h.a)(Object(h.a)({},e),{},{commentCount:e.commentCount-1}):e}))});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"authReducer/AUTHORIZATION_SUCCESS":return Object(h.a)(Object(h.a)({},e),{},{loginError:null,signupError:null,isAuth:t.isAuth});case _e:return Object(h.a)(Object(h.a)({},e),{},{loginError:t.error,isAuth:!1});case he:return Object(h.a)(Object(h.a)({},e),{},{signupError:t.error,isAuth:!1});case"authReducer/SET_IS_FETCHING":return Object(h.a)(Object(h.a)({},e),{},{isFormFetching:t.isFormFetching});default:return e}},postPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case at:return Object(h.a)(Object(h.a)({},e),{},{post:t.post});case"fullPostReducer/GET_POST_DATA_FETCHING":return Object(h.a)(Object(h.a)({},e),{},{getPostFetching:t.isFetching});case"fullPostReducer/GET_POST_DATA_ERROR":return Object(h.a)(Object(h.a)({},e),{},{postDataError:t.bool});case nt:return Object(h.a)(Object(h.a)({},e),{},{post:Object(h.a)(Object(h.a)({},e.post),{},{comments:[Object(h.a)(Object(h.a)({},t.payload),{},{isAnimation:!0})].concat(Object(R.a)(e.post.comments))})});case"fullPostReducer/SET_COMMENT_ERROR":return Object(h.a)(Object(h.a)({},e),{},{commentError:t.error});case rt:return Object(h.a)(Object(h.a)({},e),{},{isFormFetching:t.isFetching});case ot:return Object(h.a)(Object(h.a)({},e),{},{post:Object(h.a)(Object(h.a)({},e.post),{},{comments:e.post.comments.filter((function(e){return e.commentId!==t.commentId}))})});case"fullPostReducer/DELETE_COMMENT_ANIMATIONS":return Object(h.a)(Object(h.a)({},e),{},{post:Object(h.a)(Object(h.a)({},e.post),{},{comments:e.post.comments.map((function(e){return e.isAnimation?Object(h.a)(Object(h.a)({},e),{},{isAnimation:!1}):Object(h.a)(Object(h.a)({},e),{},{isAnimation:null})}))})});case"fullPostReducer/SET_IS_DELETE_FETCHING":return Object(h.a)(Object(h.a)({},e),{},{isDeleteFetching:t.isFetching});default:return e}},userPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"usersReducer/SET_USER_DETAILS":return Object(h.a)(Object(h.a)({},e),t.payload);case"homeReducer/SET_GET_USER_DETAILS_FETCHING":return Object(h.a)(Object(h.a)({},e),{},{getUserDetailsFetching:t.isFetching});case"usersReducer/ADD_NEW_POST_SUCCESS":return Object(h.a)(Object(h.a)({},e),{},{posts:[t.post].concat(Object(R.a)(e.posts))});case U:return Object(h.a)(Object(h.a)({},e),{},{posts:e.posts.filter((function(e){return e.postId!==t.postId}))});case"usersReducer/LIKE_COUNT_PLUS":return Object(h.a)(Object(h.a)({},e),{},{posts:e.posts.map((function(e){return e.postId===t.postId?Object(h.a)(Object(h.a)({},e),{},{likeCount:e.likeCount+1}):e}))});case"usersReducer/LIKE_COUNT_MINUS":return Object(h.a)(Object(h.a)({},e),{},{posts:e.posts.map((function(e){return e.postId===t.postId?Object(h.a)(Object(h.a)({},e),{},{likeCount:e.likeCount-1}):e}))});case"usersReducer/COMMENT_COUNT_PLUS":return Object(h.a)(Object(h.a)({},e),{},{posts:e.posts.map((function(e){return e.postId===t.postId?Object(h.a)(Object(h.a)({},e),{},{commentCount:e.commentCount+1}):e}))});case"userReducer/COMMENT_COUNT_MINUS":return Object(h.a)(Object(h.a)({},e),{},{posts:e.posts.map((function(e){return e.postId===t.postId?Object(h.a)(Object(h.a)({},e),{},{commentCount:e.commentCount-1}):e}))});default:return e}}}),Yt=Object(Wt.d)(Kt,Object(Wt.a)(Vt.a));window.store=Yt,document.title="48th-Social-Network",c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ce.a,null,r.a.createElement(i.a,{store:Yt},r.a.createElement(zt,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},12:function(e,t,a){e.exports={userProfileWrap:"Profile_userProfileWrap__3eSWZ",userProfile:"Profile_userProfile__3p1PP",postsTitle:"Profile_postsTitle__D_15u",content:"Profile_content__hGFcI",photo:"Profile_photo__2hYs-",editPhoto:"Profile_editPhoto__1fXT0",handle:"Profile_handle__1425b",bio:"Profile_bio__1JYOO",location:"Profile_location__1gBAS",createdAt:"Profile_createdAt___qT5W",signout:"Profile_signout__1i4Dr",edit:"Profile_edit__3kxIB"}},16:function(e,t,a){e.exports={content:"PostContent_content__bJfRF",handle:"PostContent_handle__2Xmhs",createdAt:"PostContent_createdAt__3p2f8",body:"PostContent_body__NrYgE",actions:"PostContent_actions__1GNt5",likes:"PostContent_likes__6_JRN",comments:"PostContent_comments__1izfv",iconText:"PostContent_iconText__1_Y67"}},18:function(e,t,a){e.exports={btnSubmit:"buttons_btnSubmit__1y233",btnRed:"buttons_btnRed__2HXHO"}},21:function(e,t,a){e.exports={authPage:"auth_authPage__3uFxe",authContent:"auth_authContent__3SEah",title:"auth_title__3ILpd",form:"auth_form___Mutf",lockIcon:"auth_lockIcon__1MgOi",button:"auth_button__31eXg",focus:"auth_focus__1bZC-",link:"auth_link__1656M"}},25:function(e,t,a){e.exports={header:"Header_header__63o6c",nav:"Header_nav__16A6q",navIcon:"Header_navIcon__2fqSB",navItem:"Header_navItem__TNyBF",notCount:"Header_notCount__3hp0i"}},28:function(e,t,a){e.exports={comment:"Comment_comment__3Kcfk",basket:"Comment_basket__2ZZ79",commentWithAnimations:"Comment_commentWithAnimations__1gCCq",photo:"Comment_photo__1D9IY",content:"Comment_content__2ih2Q",handle:"Comment_handle__VcN6f",createdAt:"Comment_createdAt__2o3YE",body:"Comment_body__L234V"}},29:function(e,t,a){e.exports={post:"CommentModal_post__1H3wx",postContent:"CommentModal_postContent__30ipi",handle:"CommentModal_handle__3c58r",createdAt:"CommentModal_createdAt__3IWb-",body:"CommentModal_body__14q3E",closeButton:"CommentModal_closeButton__Q8nzL",closeIcon:"CommentModal_closeIcon__mePVn",photo:"CommentModal_photo__2eSQT",comments:"CommentModal_comments__1dJ2s"}},30:function(e,t,a){e.exports={homeContainer:"Home_homeContainer__2c8ZI",postsContainer:"Home_postsContainer__1JBmx",postsTitle:"Home_postsTitle__2hhe1"}},36:function(e,t,a){e.exports={inputBox:"InputBox_inputBox__2Cgqm",input:"InputBox_input__2xqou",errorInput:"InputBox_errorInput__3rkb9",label:"InputBox_label__3EwX0",errorLabel:"InputBox_errorLabel__2IyNk"}},41:function(e,t,a){e.exports={post:"Post_post__3ZAVa",userPhoto:"Post_userPhoto__5HIFi",basket:"Post_basket__2CguM"}},46:function(e,t,a){e.exports={modalWrap:"Modal_modalWrap__1BIHq",modal:"Modal_modal__2__RI",modalWrapCenter:"Modal_modalWrapCenter__16ptC",closeModal:"Modal_closeModal__2cLR8"}},50:function(e,t,a){e.exports={notifications:"Notifications_notifications__fT4Rk",not:"Notifications_not__1EvGa"}},53:function(e,t,a){e.exports={tooltip:"Tooltip_tooltip__1s-td",text:"Tooltip_text__2Mtfe"}},68:function(e,t,a){e.exports={credErrorBlock:"CredErrorBlock_credErrorBlock__T6fEf"}},71:function(e,t,a){e.exports=a(115)},76:function(e,t,a){},99:function(e,t,a){}},[[71,1,2]]]);
//# sourceMappingURL=main.aa2c56fe.chunk.js.map